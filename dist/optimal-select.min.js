!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.OptimalSelect=e():t.OptimalSelect=e()}(this,()=>(()=>{"use strict";var t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})}};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),t.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var e={};function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,a=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function o(e,r){if(t.g.document)return!1;t.g.document=r.context||function(){for(var t=e;t.parent;)t=t.parent;return t}();var o=Object.getPrototypeOf(t.g.document);return Object.getOwnPropertyDescriptor(o,"childTags")||Object.defineProperty(o,"childTags",{enumerable:!0,get:function(){return this.children.filter(function(t){return"tag"===t.type||"script"===t.type||"style"===t.type})}}),Object.getOwnPropertyDescriptor(o,"attributes")||Object.defineProperty(o,"attributes",{enumerable:!0,get:function(){var t=this.attribs,e=Object.keys(t),n=e.reduce(function(e,n,r){return e[r]={name:n,value:t[n]},e},{});return Object.defineProperty(n,"length",{enumerable:!1,configurable:!1,value:e.length}),n}}),o.getAttribute||(o.getAttribute=function(t){return this.attribs[t]||null}),o.getElementsByTagName||(o.getElementsByTagName=function(t){var e=[];return i(this.childTags,function(n){n.name!==t&&"*"!==t||e.push(n)}),e}),o.getElementsByClassName||(o.getElementsByClassName=function(t){var e=t.trim().replace(/\s+/g," ").split(" "),n=[];return i([this],function(t){var r=t.attribs.class;r&&e.every(function(t){return r.indexOf(t)>-1})&&n.push(t)}),n}),o.querySelectorAll||(o.querySelectorAll=function(t){var e=this,r=function(t){return t.split(" ").reverse().map(function(t,e){var r=0===e,o=n(t.split(":"),2),a=o[0],c=o[1],l=null,f=null;switch(!0){case/>/.test(a):f=function(t){return function(e){return e(t.parent)&&t.parent}};break;case/^\./.test(a):var s=a.substr(1).split(".");l=function(t){var e=t.attribs.class;return e&&s.every(function(t){return e.indexOf(t)>-1})},f=function(t,e){return r?t.getElementsByClassName(s.join(" ")):"function"==typeof t?t(l):u(t,e,l)};break;case/^\[/.test(a):var d=n(a.replace(/\[|\]|"/g,"").split("="),2),h=d[0],p=d[1];l=function(t){return!(!(Object.keys(t.attribs).indexOf(h)>-1)||p&&t.attribs[h]!==p)},f=function(t,e){if(r){var n=[];return i([t],function(t){l(t)&&n.push(t)}),n}return"function"==typeof t?t(l):u(t,e,l)};break;case/^#/.test(a):var v=a.substr(1);l=function(t){return t.attribs.id===v},f=function(t,e){if(r){var n=[];return i([t],function(t,e){l(t)&&(n.push(t),e())}),n}return"function"==typeof t?t(l):u(t,e,l)};break;case/\*/.test(a):l=function(t){return!0},f=function(t,e){if(r){var n=[];return i([t],function(t){return n.push(t)}),n}return"function"==typeof t?t(l):u(t,e,l)};break;default:l=function(t){return t.name===a},f=function(t,e){if(r){var n=[];return i([t],function(t){l(t)&&n.push(t)}),n}return"function"==typeof t?t(l):u(t,e,l)}}if(!c)return f;var y=c.match(/-(child|type)\((\d+)\)$/),g=y[1],m=parseInt(y[2],10)-1,b=function(t){if(t){var e=t.parent.childTags;if("type"===g&&(e=e.filter(l)),e.findIndex(function(e){return e===t})===m)return!0}return!1};return function(t){var e=f(t);return r?e.reduce(function(t,e){return b(e)&&t.push(e),t},[]):b(e)&&e}})}(t=t.replace(/(>)(\S)/g,"$1 $2").trim()),o=r.shift(),a=r.length;return o(this).filter(function(t){for(var n=0;n<a;){if(!(t=r[n](t,e)))return!1;n+=1}return!0})}),o.contains||(o.contains=function(t){var e=!1;return i([this],function(n,r){n===t&&(e=!0,r())}),e}),!0}function i(t,e){t.forEach(function(t){var n=!0;e(t,function(){return n=!1}),t.childTags&&n&&i(t.childTags,e)})}function u(t,e,n){for(;t.parent;){if(n(t=t.parent))return t;if(t===e)break}return null}function a(t){for(var e=t.length,n=new Array(e),r=0;r<e;r++)n[r]=t[r];return n}function c(t){return t&&t.replace(/['"`\\/:\?&!#$%^()[\]{|}*+;,.<=>@~]/g,"\\$&").replace(/\n/g,"A")}t.d(e,{default:()=>k});var l={attribute:function(t){return["style","data-reactid","data-react-checksum"].indexOf(t)>-1}};function f(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.parentNode,i=s(t,e,n);return!(!i||1!==o.querySelectorAll(i).length)&&(r.unshift(i),!0)}function s(t,e,n){for(var r=e.attributes,o=Object.keys(r).sort(function(e,n){var o=t.indexOf(r[e].name),i=t.indexOf(r[n].name);return-1===i?-1===o?0:-1:o-i}),i=0,u=o.length;i<u;i++){var a=o[i],f=r[a],s=f.name,d=c(f.value);if(!y(n[s]||n.attribute,s,d,l[s]||l.attribute)){var h="[".concat(s,'="').concat(d,'"]');if(!1===/\b\d/.test(d)&&("id"===s&&(h="#".concat(d)),"class"===s)){var p=d.trim().replace(/\s+/g,".");h=".".concat(p)}return h}}return null}function d(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.parentNode,o=h(t,e);return!(!o||1!==r.getElementsByTagName(o).length)&&(n.unshift(o),!0)}function h(t,e){var n=t.tagName.toLowerCase();return y(e.tag,null,n)?null:n}function p(t,e,n,r){for(var o=e.parentNode,i=o.childTags||o.children,u=0,a=i.length;u<a;u++){var c=i[u];if(c===e){var l=v(t,c,n);if(!l)return console.warn("\n          Element couldn't be matched through strict ignore pattern!\n        ",c,n,l);var f="> ".concat(l,":nth-child(").concat(u+1,")");return r.unshift(f),!0}}return!1}function v(t,e,n){var r=s(t,e,n);return r||(r=h(e,n)),r}function y(t,e,n,r){if(!n)return!0;var o=t||r;return!!o&&o(e,n,r)}function g(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Array.isArray(n)||(n=n.length?a(n):[n]),!n.length||n.some(function(t){return 1!==t.nodeType}))throw new Error('Invalid input - to compare HTMLElements its necessary to provide a reference of the selected node(s)! (missing "elements")');var i=o(n[0],r),u=e.replace(/> /g,">").split(/\s+(?=(?:(?:[^"]*"){2})*[^"]*$)/);if(u.length<2)return m("",e,"",n);for(var c=[u.pop()];u.length>1;){var l=u.pop(),f=u.join(" "),s=c.join(" "),d="".concat(f," ").concat(s);document.querySelectorAll(d).length!==n.length&&c.unshift(m(f,l,s,n))}return c.unshift(u[0]),(u=c)[0]=m("",u[0],u.slice(1).join(" "),n),u[u.length-1]=m(u.slice(0,-1).join(" "),u[u.length-1],"",n),i&&delete t.g.document,u.join(" ").replace(/>/g,"> ").trim()}function m(t,e,n,r){if(t.length&&(t="".concat(t," ")),n.length&&(n=" ".concat(n)),/\[*\]/.test(e)){var o=e.replace(/=.*$/,"]"),i="".concat(t).concat(o).concat(n);if(b(document.querySelectorAll(i),r))e=o;else for(var u=document.querySelectorAll("".concat(t).concat(o)),a=function(){var o=u[c];if(r.some(function(t){return o.contains(t)})){var a=o.tagName.toLowerCase();return i="".concat(t).concat(a).concat(n),b(document.querySelectorAll(i),r)&&(e=a),1}},c=0,l=u.length;c<l&&!a();c++);}if(/>/.test(e)){var f=e.replace(/>/,"");i="".concat(t).concat(f).concat(n),b(document.querySelectorAll(i),r)&&(e=f)}if(/:nth-child/.test(e)){var s=e.replace(/nth-child/g,"nth-of-type");i="".concat(t).concat(s).concat(n),b(document.querySelectorAll(i),r)&&(e=s)}if(/\.\S+\.\S+/.test(e)){for(var d=e.trim().split(".").slice(1).map(function(t){return".".concat(t)}).sort(function(t,e){return t.length-e.length});d.length;){var h=e.replace(d.shift(),"").trim();if(!(i="".concat(t).concat(h).concat(n).trim()).length||">"===i.charAt(0)||">"===i.charAt(i.length-1))break;b(document.querySelectorAll(i),r)&&(e=h)}if((d=e&&e.match(/\./g))&&d.length>2){var p=document.querySelectorAll("".concat(t).concat(e)),v=function(){var o=p[c];if(r.some(function(t){return o.contains(t)})){var u=o.tagName.toLowerCase();return i="".concat(t).concat(u).concat(n),b(document.querySelectorAll(i),r)&&(e=u),1}};for(c=0,l=p.length;c<l&&!v();c++);}}return e}function b(t,e){var n=t.length;return n===e.length&&e.every(function(e){for(var r=0;r<n;r++)if(t[r]===e)return!0;return!1})}function j(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ignore,n=void 0===e?{}:e,r={};Object.keys(n).forEach(function(t){var e=n[t];"function"!=typeof e?("number"==typeof e&&(e=e.toString()),"string"==typeof e&&(e=new RegExp(c(e).replace(/\\/g,"\\\\"))),"boolean"==typeof e&&(e=e?/(?:)/:/.^/),r[t]=function(t,n){return e.test(n)}):r[t]=e});var o=function(t,e,n){var o=r[t];return!!o&&o(e,n)},i={classes:[],attributes:{},tag:null};return t.forEach(function(t){var e=i.classes,n=i.attributes,r=i.tag;if(void 0!==e){var u=t.getAttribute("class");u&&(u=u.trim().split(" ").filter(function(t){return!o("class",t,t)})).length?e.length?(e=e.filter(function(t){return u.some(function(e){return e===t})})).length?i.classes=e:delete i.classes:i.classes=u:delete i.classes}if(void 0!==n){var a=t.attributes,c=Object.keys(a).reduce(function(t,e){var n=a[e],r=n.name,i=n.value;return n&&"class"!==r&&(o(r,r,i)||o("attribute",r,i)||(t[r]=i)),t},{}),l=Object.keys(c),f=Object.keys(n);l.length?f.length?(n=f.reduce(function(t,e){var r=n[e];return r===c[e]&&(t[e]=r),t},{}),Object.keys(n).length?i.attributes=n:delete i.attributes):i.attributes=c:delete i.attributes}if(void 0!==r){var s=t.tagName.toLowerCase();o("tag",null,s)?delete i.tag:r?s!==r&&delete i.tag:i.tag=s}}),i}function A(t,e){if(t){if("string"==typeof t)return S(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(t,e):void 0}}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}function w(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(3===e.nodeType&&(e=e.parentNode),1!==e.nodeType)throw new Error('Invalid input - only HTMLElements or representations of them are supported! (not "'.concat(O(e),'")'));var r=o(e,n),i=function(t,e){var n=e.root,r=void 0===n?document:n,o=e.skip,i=void 0===o?null:o,u=e.priority,a=void 0===u?["id","class","href","src"]:u,l=e.ignore,s=void 0===l?{}:l,h=[],y=t,g=h.length,m=!1,b=i&&(Array.isArray(i)?i:[i]).map(function(t){return"function"!=typeof t?function(e){return e===t}:t}),j=function(t){return i&&b.some(function(e){return e(t)})};if(Object.keys(s).forEach(function(t){"class"===t&&(m=!0);var e=s[t];"function"!=typeof e&&("number"==typeof e&&(e=e.toString()),"string"==typeof e&&(e=new RegExp(c(e).replace(/\\/g,"\\\\"))),"boolean"==typeof e&&(e=e?/(?:)/:/.^/),s[t]=function(t,n){return e.test(n)})}),m){var A=s.attribute;s.attribute=function(t,e,n){return s.class(e)||A&&A(t,e,n)}}for(;y!==r;){if(!0!==j(y)){if(f(a,y,s,h,r))break;if(d(y,s,h,r))break;f(a,y,s,h),h.length===g&&d(y,s,h),h.length===g&&p(a,y,s,h)}y=y.parentNode,g=h.length}if(y===r){var S=v(a,y,s);h.unshift(S)}return h.join(" ")}(e,n),u=g(i,e,n);return r&&delete t.g.document,u}function E(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Array.isArray(e)||(e=a(e)),e.some(function(t){return 1!==t.nodeType}))throw new Error("Invalid input - only an Array of HTMLElements or representations of them is supported!");var r=o(e[0],n),i=function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).root,n=void 0===e?document:e,r=[];t.forEach(function(t,e){for(var o=[];t!==n;)t=t.parentNode,o.unshift(t);r[e]=o}),r.sort(function(t,e){return t.length-e.length});for(var o=r.shift(),i=null,u=function(){var t=o[a];if(r.some(function(e){return!e.some(function(e){return e===t})}))return 1;i=t},a=0,c=o.length;a<c&&!u();a++);return i}(e,n),u=w(i,n),c=function(t){var e=j(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});return e.classes||e.attributes||e.tag,[T(e)]}(e,n),l=c[0],f=g("".concat(u," ").concat(l),e,n),s=a(document.querySelectorAll(f));if(!e.every(function(t){return s.some(function(e){return e===t})})){var d=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new Map;return t.forEach(function(t){var r=function(t){return T(j([t],arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(t,e);n.has(r)||n.set(r,[]),n.get(r).push(t)}),n}(e,n);if(d.size<=1)return r&&delete t.g.document,void console.warn("\n        The selected elements can't be efficiently mapped.\n        Its probably best to use multiple single selectors instead!\n      ",e);var h,p=[],v=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=A(t))){e&&(t=e);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return i=t.done,t},e:function(t){u=!0,o=t},f:function(){try{i||null==e.return||e.return()}finally{if(u)throw o}}}}(d);try{var y,m=function(){var o,i,c=(o=h.value,i=2,function(t){if(Array.isArray(t))return t}(o)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,a=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(o,i)||A(o,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=c[0],f=c[1],s=g("".concat(u," ").concat(l),f,n),d=a(document.querySelectorAll(s));if(!f.every(function(t){return d.some(function(e){return e===t})}))return r&&delete t.g.document,console.warn("\n          The selected elements can't be efficiently mapped.\n          Its probably best to use multiple single selectors instead!\n        ",e),{v:void 0};p.push(s)};for(v.s();!(h=v.n()).done;)if(y=m())return y.v}catch(t){v.e(t)}finally{v.f()}return r&&delete t.g.document,p.join(", ")}return r&&delete t.g.document,f}function T(t){var e=t.classes,n=t.attributes,r=t.tag,o=[];if(r&&o.push(r),e&&e.length){var i=e.map(function(t){return".".concat(t)}).join("");o.push(i)}if(n&&Object.keys(n).length){var u=Object.keys(n).reduce(function(t,e){return t.push("[".concat(e,'="').concat(n[e],'"]')),t},[]).join("");o.push(u)}return o.join("")}const k=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.length&&!t.name?E(t,e):w(t,e)};return e.default})());
//# sourceMappingURL=optimal-select.min.js.map