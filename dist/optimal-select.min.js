!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.OptimalSelect=e():t.OptimalSelect=e()}(this,()=>(()=>{"use strict";var t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})}};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),t.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var e={};function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,c,u,i=[],a=!0,l=!1;try{if(c=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;a=!1}else for(;!(a=(r=c.call(n)).done)&&(i.push(r.value),i.length!==e);a=!0);}catch(t){l=!0,o=t}finally{try{if(!a&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function o(e,r){if(t.g.document)return!1;t.g.document=r.context||function(){for(var t=e;t.parent;)t=t.parent;return t}();var o=Object.getPrototypeOf(t.g.document);return Object.getOwnPropertyDescriptor(o,"childTags")||Object.defineProperty(o,"childTags",{enumerable:!0,get:function(){return this.children.filter(function(t){return"tag"===t.type||"script"===t.type||"style"===t.type})}}),Object.getOwnPropertyDescriptor(o,"attributes")||Object.defineProperty(o,"attributes",{enumerable:!0,get:function(){var t=this.attribs,e=Object.keys(t),n=e.reduce(function(e,n,r){return e[r]={name:n,value:t[n]},e},{});return Object.defineProperty(n,"length",{enumerable:!1,configurable:!1,value:e.length}),n}}),o.getAttribute||(o.getAttribute=function(t){return this.attribs[t]||null}),o.getElementsByTagName||(o.getElementsByTagName=function(t){var e=[];return c(this.childTags,function(n){n.name!==t&&"*"!==t||e.push(n)}),e}),o.getElementsByClassName||(o.getElementsByClassName=function(t){var e=t.trim().replace(/\s+/g," ").split(" "),n=[];return c([this],function(t){var r=t.attribs.class;r&&e.every(function(t){return r.indexOf(t)>-1})&&n.push(t)}),n}),o.querySelectorAll||(o.querySelectorAll=function(t){var e=this,r=function(t){return t.split(" ").reverse().map(function(t,e){var r=0===e,o=n(t.split(":"),2),i=o[0],a=o[1],l=null,f=null;switch(!0){case/>/.test(i):f=function(t){return function(e){return e(t.parent)&&t.parent}};break;case/^\./.test(i):var s=i.substr(1).split(".");l=function(t){var e=t.attribs.class;return e&&s.every(function(t){return e.indexOf(t)>-1})},f=function(t,e){return r?t.getElementsByClassName(s.join(" ")):"function"==typeof t?t(l):u(t,e,l)};break;case/^\[/.test(i):var h=n(i.replace(/\[|\]|"/g,"").split("="),2),p=h[0],g=h[1];l=function(t){return!(!(Object.keys(t.attribs).indexOf(p)>-1)||g&&t.attribs[p]!==g)},f=function(t,e){if(r){var n=[];return c([t],function(t){l(t)&&n.push(t)}),n}return"function"==typeof t?t(l):u(t,e,l)};break;case/^#/.test(i):var v=i.substr(1);l=function(t){return t.attribs.id===v},f=function(t,e){if(r){var n=[];return c([t],function(t,e){l(t)&&(n.push(t),e())}),n}return"function"==typeof t?t(l):u(t,e,l)};break;case/\*/.test(i):l=function(t){return!0},f=function(t,e){if(r){var n=[];return c([t],function(t){return n.push(t)}),n}return"function"==typeof t?t(l):u(t,e,l)};break;default:l=function(t){return t.name===i},f=function(t,e){if(r){var n=[];return c([t],function(t){l(t)&&n.push(t)}),n}return"function"==typeof t?t(l):u(t,e,l)}}if(!a)return f;var d=a.match(/-(child|type)\((\d+)\)$/),y=d[1],m=parseInt(d[2],10)-1,b=function(t){if(t){var e=t.parent.childTags;if("type"===y&&(e=e.filter(l)),e.findIndex(function(e){return e===t})===m)return!0}return!1};return function(t){var e=f(t);return r?e.reduce(function(t,e){return b(e)&&t.push(e),t},[]):b(e)&&e}})}(t=t.replace(/(>)(\S)/g,"$1 $2").trim()),o=r.shift(),i=r.length;return o(this).filter(function(t){for(var n=0;n<i;){if(!(t=r[n](t,e)))return!1;n+=1}return!0})}),o.contains||(o.contains=function(t){var e=!1;return c([this],function(n,r){n===t&&(e=!0,r())}),e}),!0}function c(t,e){t.forEach(function(t){var n=!0;e(t,function(){return n=!1}),t.childTags&&n&&c(t.childTags,e)})}function u(t,e,n){for(;t.parent;){if(n(t=t.parent))return t;if(t===e)break}return null}function i(t){for(var e=t.length,n=new Array(e),r=0;r<e;r++)n[r]=t[r];return n}function a(t){return t&&t.replace(/['"`\\/:\?&!#$%^()[\]{|}*+;,.<=>@~]/g,"\\$&").replace(/\n/g,"A")}t.d(e,{default:()=>S});var l={attribute:function(t){return["style","data-reactid","data-react-checksum"].indexOf(t)>-1}};function f(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.parentNode,c=s(t,e,n);return!(!c||1!==o.querySelectorAll(c).length)&&(r.unshift(c),!0)}function s(t,e,n){for(var r=e.attributes,o=Object.keys(r).sort(function(e,n){var o=t.indexOf(r[e].name),c=t.indexOf(r[n].name);return-1===c?-1===o?0:-1:o-c}),c=0,u=o.length;c<u;c++){var i=o[c],f=r[i],s=f.name,h=a(f.value);if(!d(n[s]||n.attribute,s,h,l[s]||l.attribute)){var p="[".concat(s,'="').concat(h,'"]');if(!1===/\b\d/.test(h)&&("id"===s&&(p="#".concat(h)),"class"===s)){var g=h.trim().replace(/\s+/g,".");p=".".concat(g)}return p}}return null}function h(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.parentNode,o=p(t,e);return!(!o||1!==r.getElementsByTagName(o).length)&&(n.unshift(o),!0)}function p(t,e){var n=t.tagName.toLowerCase();return d(e.tag,null,n)?null:n}function g(t,e,n,r){for(var o=e.parentNode,c=o.childTags||o.children,u=0,i=c.length;u<i;u++){var a=c[u];if(a===e){var l=v(t,a,n);if(!l)return console.warn("\n          Element couldn't be matched through strict ignore pattern!\n        ",a,n,l);var f="> ".concat(l,":nth-child(").concat(u+1,")");return r.unshift(f),!0}}return!1}function v(t,e,n){var r=s(t,e,n);return r||(r=p(e,n)),r}function d(t,e,n,r){if(!n)return!0;var o=t||r;return!!o&&o(e,n,r)}function y(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Array.isArray(n)||(n=n.length?i(n):[n]),!n.length||n.some(function(t){return 1!==t.nodeType}))throw new Error('Invalid input - to compare HTMLElements its necessary to provide a reference of the selected node(s)! (missing "elements")');var c=o(n[0],r),u=e.replace(/> /g,">").split(/\s+(?=(?:(?:[^"]*"){2})*[^"]*$)/);if(u.length<2)return m("",e,"",n);for(var a=[u.pop()];u.length>1;){var l=u.pop(),f=u.join(" "),s=a.join(" "),h="".concat(f," ").concat(s);document.querySelectorAll(h).length!==n.length&&a.unshift(m(f,l,s,n))}return a.unshift(u[0]),(u=a)[0]=m("",u[0],u.slice(1).join(" "),n),u[u.length-1]=m(u.slice(0,-1).join(" "),u[u.length-1],"",n),c&&delete t.g.document,u.join(" ").replace(/>/g,"> ").trim()}function m(t,e,n,r){if(t.length&&(t="".concat(t," ")),n.length&&(n=" ".concat(n)),/\[*\]/.test(e)){var o=e.replace(/=.*$/,"]"),c="".concat(t).concat(o).concat(n);if(b(document.querySelectorAll(c),r))e=o;else for(var u=document.querySelectorAll("".concat(t).concat(o)),i=function(){var o=u[a];if(r.some(function(t){return o.contains(t)})){var i=o.tagName.toLowerCase();return c="".concat(t).concat(i).concat(n),b(document.querySelectorAll(c),r)&&(e=i),1}},a=0,l=u.length;a<l&&!i();a++);}if(/>/.test(e)){var f=e.replace(/>/,"");c="".concat(t).concat(f).concat(n),b(document.querySelectorAll(c),r)&&(e=f)}if(/:nth-child/.test(e)){var s=e.replace(/nth-child/g,"nth-of-type");c="".concat(t).concat(s).concat(n),b(document.querySelectorAll(c),r)&&(e=s)}if(/\.\S+\.\S+/.test(e)){for(var h=e.trim().split(".").slice(1).map(function(t){return".".concat(t)}).sort(function(t,e){return t.length-e.length});h.length;){var p=e.replace(h.shift(),"").trim();if(!(c="".concat(t).concat(p).concat(n).trim()).length||">"===c.charAt(0)||">"===c.charAt(c.length-1))break;b(document.querySelectorAll(c),r)&&(e=p)}if((h=e&&e.match(/\./g))&&h.length>2){var g=document.querySelectorAll("".concat(t).concat(e)),v=function(){var o=g[a];if(r.some(function(t){return o.contains(t)})){var u=o.tagName.toLowerCase();return c="".concat(t).concat(u).concat(n),b(document.querySelectorAll(c),r)&&(e=u),1}};for(a=0,l=g.length;a<l&&!v();a++);}}return e}function b(t,e){var n=t.length;return n===e.length&&e.every(function(e){for(var r=0;r<n;r++)if(t[r]===e)return!0;return!1})}function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function O(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(3===e.nodeType&&(e=e.parentNode),1!==e.nodeType)throw new Error('Invalid input - only HTMLElements or representations of them are supported! (not "'.concat(j(e),'")'));var r=o(e,n),c=function(t,e){var n=e.root,r=void 0===n?document:n,o=e.skip,c=void 0===o?null:o,u=e.priority,i=void 0===u?["id","class","href","src"]:u,l=e.ignore,s=void 0===l?{}:l,p=[],d=t,y=p.length,m=!1,b=c&&(Array.isArray(c)?c:[c]).map(function(t){return"function"!=typeof t?function(e){return e===t}:t}),j=function(t){return c&&b.some(function(e){return e(t)})};if(Object.keys(s).forEach(function(t){"class"===t&&(m=!0);var e=s[t];"function"!=typeof e&&("number"==typeof e&&(e=e.toString()),"string"==typeof e&&(e=new RegExp(a(e).replace(/\\/g,"\\\\"))),"boolean"==typeof e&&(e=e?/(?:)/:/.^/),s[t]=function(t,n){return e.test(n)})}),m){var O=s.attribute;s.attribute=function(t,e,n){return s.class(e)||O&&O(t,e,n)}}for(;d!==r;){if(!0!==j(d)){if(f(i,d,s,p,r))break;if(h(d,s,p,r))break;f(i,d,s,p),p.length===y&&h(d,s,p),p.length===y&&g(i,d,s,p)}d=d.parentNode,y=p.length}if(d===r){var A=v(i,d,s);p.unshift(A)}return p.join(" ")}(e,n),u=y(c,e,n);return r&&delete t.g.document,u}function A(t){var e=t.classes,n=t.attributes,r=t.tag,o=[];if(r&&o.push(r),e&&e.length){var c=e.map(function(t){return".".concat(t)}).join("");o.push(c)}if(n&&Object.keys(n).length){var u=Object.keys(n).reduce(function(t,e){return t.push("[".concat(e,'="').concat(n[e],'"]')),t},[]).join("");o.push(u)}return o.join("")}const S=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.length&&!e.name?function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Array.isArray(e)||(e=i(e)),e.some(function(t){return 1!==t.nodeType}))throw new Error("Invalid input - only an Array of HTMLElements or representations of them is supported!");var r=n.outlierTolerance,c=1-(void 0===r?0:r),u=o(e[0],n),l=function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).root,n=void 0===e?document:e,r=[];t.forEach(function(t,e){for(var o=[];t!==n;)t=t.parentNode,o.unshift(t);r[e]=o}),r.sort(function(t,e){return t.length-e.length});for(var o=r.shift(),c=null,u=function(){var t=o[i];if(r.some(function(e){return!e.some(function(e){return e===t})}))return 1;c=t},i=0,a=o.length;i<a&&!u();i++);return c}(e,n),f=O(l,n),s=function(t){var e=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.ignore,r=void 0===n?{}:n,o=e.outlierTolerance,c=1-(void 0===o?0:o),u=t.length,i={};Object.keys(r).forEach(function(t){var e=r[t];"function"!=typeof e?("number"==typeof e&&(e=e.toString()),"string"==typeof e&&(e=new RegExp(a(e).replace(/\\/g,"\\\\"))),"boolean"==typeof e&&(e=e?/(?:)/:/.^/),i[t]=function(t,n){return e.test(n)}):i[t]=e});var l=function(t,e,n){var r=i[t];return!!r&&r(e,n)},f={},s={},h={};t.forEach(function(t){var e=t.getAttribute("class");e&&e.trim().split(" ").filter(function(t){return t&&!l("class",t,t)}).forEach(function(t){f[t]=(f[t]||0)+1});var n=t.attributes;Object.keys(n).forEach(function(t){var e=n[t],r=e.name,o=e.value;if(e&&"class"!==r&&!l(r,r,o)&&!l("attribute",r,o)){var c="".concat(r,"=").concat(o);s[c]||(s[c]={name:r,value:o,count:0}),s[c].count++}});var r=t.tagName.toLowerCase();l("tag",null,r)||(h[r]=(h[r]||0)+1)});var p={classes:[],attributes:{},tag:null},g=Object.keys(f).filter(function(t){return f[t]/u>=c});g.length?p.classes=g:delete p.classes;var v={};Object.keys(s).forEach(function(t){var e=s[t],n=e.name,r=e.value;e.count/u>=c&&(v[n]=r)}),Object.keys(v).length?p.attributes=v:delete p.attributes;var d=null,y=0;return Object.keys(h).forEach(function(t){var e=h[t];e/u>=c&&e>y&&(d=t,y=e)}),d?p.tag=d:delete p.tag,p}(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});return e.classes||e.attributes||e.tag,[A(e)]}(e,n),h=s[0],p=y("".concat(f," ").concat(h),e,n),g=i(document.querySelectorAll(p));return e.filter(function(t){return g.some(function(e){return e===t})}).length/e.length<c?(u&&delete t.g.document,void console.warn("\n      The selected elements can't be efficiently mapped.\n      Its probably best to use multiple single selectors instead!\n    ",e)):(u&&delete t.g.document,p)}(e,n):O(e,n)};return e.default})());
//# sourceMappingURL=optimal-select.min.js.map